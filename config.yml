# Configuração principal
# ------------------------------------------------------------------
# config.yml - Configuração do robô de monitoramento do DOU
#
# Estratégia:
# - Rodar 1x ao dia após a atualização do DOU.
# - Focar na "edição do dia" (period: today), com filtro de data no código.
# - Seção padrão: Seção 1 (do1).
# - Buscas focadas em temas fiscais/tributários, incentivos e normas contábeis.
# - IA (Hugging Face) opcional para resumir cada publicação.
# ------------------------------------------------------------------

search:
  # Termos/frases a serem buscados no DOU
  phrases:
    # Incentivos, P&D e Lei do Bem
    - "Lei nº 11.196"
    - "Lei 11.196/2005"
    - "Lei do Bem"
    - "Capítulo III, da Lei nº 11.196"

    # Lei da Informática / TICs / ZFM / Rota 2030
    - "Lei nº 8.248"
    - "Lei da Informática"
    - "Rota 2030"
    - "Portaria MCTI"

    # Tributos federais principais
    - "IRPJ"
    - "CSLL"
    - "IRPF"
    - "PIS"
    - "PIS/Pasep"
    - "COFINS"
    - "IPI"
    - "IOF"
    - "CIDE"
    - "ITR"

    # Obrigações acessórias / SPED / créditos
    - "DCTF"
    - "DCTFWeb"
    - "ECD"
    - "Escrituração Contábil Digital"
    - "ECF"
    - "Escrituração Contábil Fiscal"
    - "EFD-Reinf"
    - "EFD-Contribuições"
    - "SPED"
    - "PER/DCOMP"

    # Normas contábeis (CPC / NBC)
    - "Pronunciamento Técnico CPC"
    - "Comitê de Pronunciamentos Contábeis"
    - "CPC "
    - "NBC TG"
    - "Norma Brasileira de Contabilidade"

    # Guarda-chuva fiscal geral
    - "legislação tributária"
    - "legislação fiscal"
    - "regime tributário"
    - "tratamento tributário"

  # Enriquecer cada item abrindo a matéria
  enrich_listing: true

  # Período da busca:
  # - today : edição do dia (padrão)
  # - week  : última semana
  # - month : último mês
  # - any   : qualquer período
  period: today

  # Janela de dias (apenas informativo no email)
  days_window: 1

  # Seções do DOU:
  #   - "do1"  : Seção 1
  #   - "do2"  : Seção 2
  #   - "do3"  : Seção 3
  #   - "todos": todas as seções
  sections: ["do1"]

  # Rótulo amigável da seção
  section_label: "Edição do dia – Seção 1"

pagination:
  # Número máximo de páginas de resultados
  max_pages: 5

filters:
  # URLs aceitáveis como "página de matéria"
  accept_url_patterns:
    - "^https://www\\.in\\.gov\\.br/(web/dou/-/|materia/-/)"

  # URLs a rejeitar
  reject_url_substrings:
    - "consulta/-/buscar/dou"
    - "/web/guest/"
    - "/leiturajornal"
    - "javascript:"
    - "#"
    - "acesso-"
    - "govbr"

  # Palavras-chave no TÍTULO
  title_keywords:
    - "INSTRUÇÃO NORMATIVA"
    - "INSTRUCAO NORMATIVA"
    - "PORTARIA"
    - "RESOLUÇÃO"
    - "RESOLUCAO"
    - "DESPACHO"
    - "ATO DECLARATÓRIO"
    - "ATO DECLARATORIO"
    - "SOLUÇÃO DE CONSULTA"
    - "SOLUCAO DE CONSULTA"
    - "SOLUÇÃO DE DIVERGÊNCIA"
    - "SOLUCAO DE DIVERGENCIA"
    - "DESPACHO DECISÓRIO"
    - "DESPACHO DECISORIO"
    - "COMUNICADO"

  # Filtro opcional por órgão (comente para desativar)
  orgao_keywords:
    - "Receita Federal do Brasil"
    - "Secretaria Especial da Receita Federal do Brasil"
    - "Ministério da Fazenda"
    - "Banco Central do Brasil"
    - "Ministério da Ciência, Tecnologia e Inovação"
    - "Conselho Nacional de Política Fazendária"

email:
  # Prefixo do assunto
  subject_prefix: "[DOU Fiscal/Tributário]"

  # Destinatários principais (TO)
  to:
    - "diogo.neis@martinelliaud.com.br"
    # - "karine.batista@martinelliaud.com.br"
    # - "gustavo@martinelliaud.com.br"

  # Cópia (CC) - pode ser sobrescrito via MAIL_CC
  cc:
    - "dvneis@gmail.com"
    # - "outro-cc@exemplo.com"

  # Cópia oculta (BCC) - pode ser sobrescrito via MAIL_BCC
  bcc:
    # - "copia-oculta@exemplo.com"
    # - "backup@exemplo.com"

  # Remetente
  from_: "monitor.lotes.martinelliaud@gmail.com"

  # Configuração SMTP (pode ser sobrescrita via env vars)
  smtp:
    host: "smtp.gmail.com"
    port: 587
    timeout: 30
    use_tls: true

# ------------------------------------------------------------------
# Configuração da IA (resumos automáticos)
# ------------------------------------------------------------------
ai:
  summaries:
    # Ativar/desativar resumos
    enabled: true
    
    # Provedor: "gemini" | "hf" | "fallback"
    # - "gemini": tenta só Gemini
    # - "hf": tenta só Hugging Face
    # - "fallback": tenta Gemini e depois HF
    provider: "fallback"          # já deixo pronto para Gemini + HF
    
    # Modelo principal (Gemini)
    #model: "gemini-2.5-flash"
    
    # Modelo específico para Hugging Face (fallback)
    hf_model: "recogna-nlp/ptt5-base-summ-temario" #"recogna-nlp/ptt5-base-summ-xlsum" 
    
    # Limites
    max_chars_input: 5000      # quanto do texto cru vai para a IA
    max_chars_output: 350      # limite em caracteres do resumo final
    timeout_sec: 30
    max_retries: 3
    
    # Configurações específicas do Gemini
    gemini:
      temperature: 0.2
      max_tokens: 300
      
    # Configurações específicas do Hugging Face
    huggingface:
      max_new_tokens: 300
